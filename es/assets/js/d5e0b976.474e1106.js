"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[347],{4137:function(e,a,n){n.d(a,{Zo:function(){return d},kt:function(){return u}});var t=n(7294);function l(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){l(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function r(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=t.createContext({}),s=function(e){var a=t.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},d=function(e){var a=s(e.components);return t.createElement(p.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var n=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),c=s(n),u=l,k=c["".concat(p,".").concat(u)]||c[u]||m[u]||i;return n?t.createElement(k,o(o({ref:a},d),{},{components:n})):t.createElement(k,o({ref:a},d))}));function u(e,a){var n=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var i=n.length,o=new Array(i);o[0]=c;var r={};for(var p in a)hasOwnProperty.call(a,p)&&(r[p]=a[p]);r.originalType=e,r.mdxType="string"==typeof e?e:l,o[1]=r;for(var s=2;s<i;s++)o[s]=n[s];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5701:function(e,a,n){n.r(a),n.d(a,{assets:function(){return d},contentTitle:function(){return p},default:function(){return u},frontMatter:function(){return r},metadata:function(){return s},toc:function(){return m}});var t=n(3117),l=n(102),i=(n(7294),n(4137)),o=["components"],r={title:"Sintaxis de las reglas de filtrado DNS",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},p=void 0,s={unversionedId:"general/dns-filtering-syntax",id:"general/dns-filtering-syntax",title:"Sintaxis de las reglas de filtrado DNS",description:"Aqu\xed te mostramos c\xf3mo escribir reglas de filtrado DNS personalizadas para uso en productos AdGuard",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/general/dns-filtering-syntax.md",sourceDirName:"general",slug:"/general/dns-filtering-syntax",permalink:"/KnowledgeBaseDNS/es/general/dns-filtering-syntax",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/general/dns-filtering-syntax.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Sintaxis de las reglas de filtrado DNS",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},sidebar:"sidebar",previous:{title:"Filtrado de DNS",permalink:"/KnowledgeBaseDNS/es/general/dns-filtering"},next:{title:"Proveedores de DNS conocidos",permalink:"/KnowledgeBaseDNS/es/general/dns-providers"}},d={},m=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Ejemplos b\xe1sicos",id:"ejemplos-b\xe1sicos",level:2},{value:"Sintaxis de estilo Adblock",id:"sintaxis-de-estilo-adblock",level:2},{value:"Car\xe1cteres especiales",id:"car\xe1cteres-especiales",level:3},{value:"Expresiones regulares",id:"expresiones-regulares",level:3},{value:"Comentarios",id:"comentarios",level:3},{value:"Modificadores de reglas",id:"modificadores-de-reglas",level:3},{value:"<code>cliente</code>",id:"cliente",level:4},{value:"<code>denyallow</code>",id:"denyallow",level:4},{value:"<code>dnstype</code>",id:"dnstype",level:4},{value:"<code>dnsrewrite</code>",id:"dnsrewrite",level:4},{value:"<code>importante</code>",id:"importante",level:4},{value:"<code>badfilter</code>",id:"badfilter",level:4},{value:"<code>ctag</code>",id:"ctag",level:4},{value:"<code>/etc/hosts</code>-Sintaxis de estilo",id:"etc-hosts-syntax",level:2},{value:"Sintaxis s\xf3lo para dominios",id:"sintaxis-s\xf3lo-para-dominios",level:2},{value:"Compilador de hostlists",id:"compilador-de-hostlists",level:2}],c={toc:m};function u(e){var a=e.components,n=(0,l.Z)(e,o);return(0,i.kt)("wrapper",(0,t.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Aqu\xed te mostramos c\xf3mo escribir reglas de filtrado DNS personalizadas para uso en productos AdGuard"),(0,i.kt)("p",{parentName:"div"},"Quick links: ",(0,i.kt)("a",{parentName:"p",href:"https://agrd.io/download-kb-adblock"},"Download AdGuard Ad Blocker"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardHome#getting-started"},"Get AdGuard Home"),", ",(0,i.kt)("a",{parentName:"p",href:"https://agrd.io/download-dns"},"Try AdGuard DNS")))),(0,i.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,i.kt)("p",null,"Puedes usar la sintaxis de las reglas de filtrado DNS de AdGuard para hacer que las reglas sean m\xe1s flexibles, de esa manera pueden bloquear contenidos seg\xfan tus preferencias. La sintaxis de las reglas de filtrado DNS de AdGuard puede ser usada en diferentes productos de AdGuard como AdGuard Home, AdGuard DNS y AdGuard para Windows/Mac/Android."),(0,i.kt)("p",null,"Hay tres diferentes enfoques para escribir listas de bloqueo de hosts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"Sintaxis estilo Adblock"),": el enfoque m\xe1s moderno para escribir reglas de filtrado, basado en el uso de un subconjunto de reglas al estilo de las usadas por AdBlock. De esta manera, las listas de bloqueo creadas son compatibles con las de los bloqueadores de anuncios para navegador.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#etc-hosts-syntax"},(0,i.kt)("inlineCode",{parentName:"a"},"/etc/hosts")," Sintaxis"),": el enfoque antiguo y probado, que usa la misma sintaxis que los sistemas operativos usan para sus archivos de hosts.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#domains-only-syntax"},"Sintaxis de dominios"),": una simple lista de nombres de dominio."))),(0,i.kt)("p",null,"Si est\xe1s creando una lista de bloqueo de hosts, te recomendamos que utilices la ",(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"sintaxis al estilo-Adblock"),". Esta sintaxis posee algunas ventajas importantes respecto a la sintaxis antigua:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Tama\xf1o de las listas de bloqueo.")," El uso de comparaci\xf3n de patrones le permite tener una sola regla en lugar de cientos de entradas ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Compatibilidad.")," Su lista de bloqueo ser\xe1 compatible con los bloqueadores de anuncios para navegador, y ser\xe1 m\xe1s f\xe1cil compartir reglas con una lista de filtros de navegador.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Extensibilidad.")," Durante la \xfaltima d\xe9cada, la sintaxis de estilo Adblock ha evolucionado enormemente, y no vemos por qu\xe9 no extenderla a\xfan m\xe1s y proporcionar funciones adicionales para los bloqueadores de toda la red."))),(0,i.kt)("p",null,"Si est\xe1s manteniendo una lista de bloqueo de estilo ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),", o m\xfaltiples listas de filtrado (independientemente del tipo), proporcionamos una herramienta para la compilaci\xf3n de listas de bloqueo. Lo llamamos ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"}," Compilador Hostlist")," y lo usamos nosotros mismos para crear ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardSDNSFilter"}," los filtros de AdGuard DNS"),"."),(0,i.kt)("h2",{id:"ejemplos-b\xe1sicos"},"Ejemplos b\xe1sicos"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^"),": bloquea el acceso al dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y todos sus subdominios, como ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),": desbloquea el acceso al dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y todos sus subdominios.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4 example.org"),": (atenci\xf3n, sintaxis estilo ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts")," antiguo) en AdGuard Home, el programa responde con ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," a las consultas para el dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),", pero ",(0,i.kt)("strong",{parentName:"p"},"no")," a sus subdominios. En el DNS privado de AdGuard, bloquea el acceso a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org")," sigue estando permitido."),(0,i.kt)("p",{parentName:"li"},"En AdGuard Home, usar la direcci\xf3n IP no especificada (",(0,i.kt)("inlineCode",{parentName:"p"},"0.0.0.0"),") o una direcci\xf3n local (",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," y similares) para un host es b\xe1sicamente lo mismo que bloquear ese host."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# Devuelve la direcci\xf3n IP 1.2.3.4 para example.org.\n1.2.3.4 example.org\n# Bloquea example.org respondiendo con 0.0.0.0.\n0.0.0.0 example.org\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),": una regla de dominio simple. Bloquea el dominio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," pero ",(0,i.kt)("strong",{parentName:"p"},"no")," sus subdominios. ",(0,i.kt)("inlineCode",{parentName:"p"},"www.example.org")," sigue estando permitido.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"! Es un comentario ")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"# Tambi\xe9n un comentario"),": comentarios.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"/REGEX/"),": bloquea el acceso a los dominios que coincidan con la expresi\xf3n regular especificada."))),(0,i.kt)("h2",{id:"sintaxis-de-estilo-adblock"},"Sintaxis de estilo Adblock"),(0,i.kt)("p",null,"Este es un subconjunto de la ",(0,i.kt)("a",{parentName:"p",href:"https://adguard.com/kb/general/ad-filtering/create-own-filters/"},"sintaxis tradicional de estilo Adblock")," que utilizan los bloqueadores de anuncios para navegador."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},'     rule = ["@@"] pattern [ "$" modifiers ]\nmodifiers = [modifier0, modifier1[, ...[, modifierN]]]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"pattern")," (patr\xf3n): la m\xe1scara del nombre de host. Cada nombre de host se compara con esta m\xe1scara. El patr\xf3n tambi\xe9n puede contener caracteres especiales, que se describen a continuaci\xf3n.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@"),": el marcador que se utiliza en las reglas de excepci\xf3n. Inicie su regla con este marcador si desea desactivar el filtrado para los nombres de host que coincidan.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"modifiers")," (modificadores): par\xe1metros que aclaran la regla. Pueden limitar el alcance de la norma o incluso cambiar por completo su funcionamiento."))),(0,i.kt)("h3",{id:"car\xe1cteres-especiales"},"Car\xe1cteres especiales"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"*"),": el car\xe1cter comod\xedn. Se utiliza para representar cualquier conjunto de caracteres. Esto tambi\xe9n puede ser una cadena de texto vac\xeda o una cadena de texto de cualquier longitud.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||"),": coincide con el comienzo de un nombre de host, incluido cualquier subdominio. Por ejemplo, ",(0,i.kt)("inlineCode",{parentName:"p"},"||example.org")," coincide con ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"test.example.org")," pero no con ",(0,i.kt)("inlineCode",{parentName:"p"},"testexample.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"^"),": el car\xe1cter de separador. A diferencia del bloqueo de anuncios para navegador, no hay nada que separar en un nombre de host, por lo que el \xfanico prop\xf3sito de este car\xe1cter es marcar el final del nombre de host.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"|"),": un puntero al principio o al final del nombre de host. El valor depende de la ubicaci\xf3n del car\xe1cter. Por ejemplo, la regla ",(0,i.kt)("inlineCode",{parentName:"p"},"ample.org|")," corresponde a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," pero no a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org.com"),". ",(0,i.kt)("inlineCode",{parentName:"p"},"|example")," corresponde a ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," pero no a ",(0,i.kt)("inlineCode",{parentName:"p"},"test.example"),"."))),(0,i.kt)("h3",{id:"expresiones-regulares"},"Expresiones regulares"),(0,i.kt)("p",null,"Si deseas a\xfan m\xe1s flexibilidad en la creaci\xf3n de reglas, puedes usar ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions"},"expresiones regulares")," en lugar de la sintaxis simplificada predeterminada. Si desea utilizar una expresi\xf3n regular, el patr\xf3n debe verse as\xed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},'pattern = "/" regexp "/"\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"/example.*/")," bloquear\xe1 los hosts que coincidan con la regexp ",(0,i.kt)("inlineCode",{parentName:"p"},"example.*"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@/example.*/$important")," desbloquear\xe1 los hosts que coincidan con la regexp ",(0,i.kt)("inlineCode",{parentName:"p"},"example.*"),". Tenga en cuenta que esta regla tambi\xe9n implica el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"important")," (importante)."))),(0,i.kt)("h3",{id:"comentarios"},"Comentarios"),(0,i.kt)("p",null,"Cualquier l\xednea que comience con un signo de exclamaci\xf3n o de almohadilla es un comentario y ser\xe1 ignorado por el motor de filtrado. Los comentarios suelen colocarse encima de las reglas y se utilizan para describir lo que hace una regla."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplo:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"! Esto es un comentario.\n# Esto tambi\xe9n es un comentario.\n")),(0,i.kt)("h3",{id:"modificadores-de-reglas"},"Modificadores de reglas"),(0,i.kt)("p",null,"Puedes cambiar el comportamiento de una regla agregando modificadores. Los modificadores deben situarse al final de la regla despu\xe9s del car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," y estar separados por comas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none",metastring:"||example.org^$important","||example.org^$important":!0},"")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^")," es el patr\xf3n de coincidencia. ",(0,i.kt)("inlineCode",{parentName:"p"},"$"),' es el delimitador, que se\xf1ala que el resto de la regla son modificadores. El modificador es "importante".')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You may want to use multiple modifiers in a rule. En ese caso, sep\xe1ralos con comas:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$client=127.0.0.1,dnstype=A\n")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^")," es el patr\xf3n de coincidencia. ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," es el delimitador, que se\xf1ala que el resto de la regla son modificadores. ",(0,i.kt)("inlineCode",{parentName:"p"},"client=127.0.0.1")," es el modificador ",(0,i.kt)("a",{parentName:"p",href:"#client"},(0,i.kt)("inlineCode",{parentName:"a"},"client"))," con su valor, ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),", es el delimitador. Y por \xfaltimo, ",(0,i.kt)("inlineCode",{parentName:"p"},"dnstype=A")," es el modificador ",(0,i.kt)("a",{parentName:"p",href:"#dnstype"},(0,i.kt)("inlineCode",{parentName:"a"},"dnstype"))," con su valor, ",(0,i.kt)("inlineCode",{parentName:"p"},"A"),"."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTA:")," Si una regla contiene un modificador que no aparece en este documento, toda la regla ",(0,i.kt)("strong",{parentName:"p"},"debe ser ignorada"),". De este modo, evitamos los falsos positivos cuando alguien intenta utilizar listas de filtros para bloqueadores de anuncios sin modificarlas, como EasyList o EasyPrivacy."),(0,i.kt)("h4",{id:"cliente"},(0,i.kt)("inlineCode",{parentName:"h4"},"cliente")),(0,i.kt)("p",null,"El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"client")," (cliente) permite especificar los clientes a los que se aplica esta regla. Hay dos formas principales de identificar a un cliente:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por su direcci\xf3n IP o prefijo CIDR. Esta forma funciona para todo tipo de clientes.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por su nombre. Este modo s\xf3lo funciona para los clientes persistentes (en AdGuard Home) y los dispositivos (en Private AdGuard DNS), que usted ha a\xf1adido manualmente."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTA:"),' En AdGuard Home, actualmente no se admiten ClientIDs, s\xf3lo nombres. Si ha a\xf1adido un cliente con el nombre "Mi Cliente" y ClientID ',(0,i.kt)("inlineCode",{parentName:"p"},"mi-cliente")," escriba su modificador como ",(0,i.kt)("inlineCode",{parentName:"p"},"$client='Mi Cliente'")," en lugar de ",(0,i.kt)("inlineCode",{parentName:"p"},"$client=mi-cliente"),"."))),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$client=valor1|valor2|...\n")),(0,i.kt)("p",null,"Tambi\xe9n puedes excluir clientes a\xf1adiendo un car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"~")," antes del valor. En este caso, la regla no se aplica a las solicitudes DNS de este cliente."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$client=~valor1\n")),(0,i.kt)("p",null,"Los nombres de los clientes suelen contener espacios u otros caracteres especiales, por lo que debes colocar el nombre entre comillas. Se admiten comillas ASCII simples y dobles. Utiliza la barra invertida (",(0,i.kt)("inlineCode",{parentName:"p"},"\\"),") para escapar de las comillas (",(0,i.kt)("inlineCode",{parentName:"p"},'"')," y ",(0,i.kt)("inlineCode",{parentName:"p"},"'"),"), comas (",(0,i.kt)("inlineCode",{parentName:"p"},","),") y barras verticales (",(0,i.kt)("inlineCode",{parentName:"p"},"|"),")."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTA:")," Cuando excluyes a un cliente, debes **** colocar ",(0,i.kt)("inlineCode",{parentName:"p"},"~")," fuera de las comillas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||*^$client=127.0.0.1"),": desbloquea todo para localhost.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},'||example.org^$client="Frank\\\'s laptop"'),": bloquea ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," s\xf3lo para el cliente llamado ",(0,i.kt)("inlineCode",{parentName:"p"},'"Frank\\\'s laptop"'),". Ten en cuenta que las comillas (",(0,i.kt)("inlineCode",{parentName:"p"},'"'),") en el nombre deben escaparse.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~'Mary\\'s\\, John\\'s\\, and Boris\\'s laptops'"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," para todos excepto para el cliente llamado ",(0,i.kt)("inlineCode",{parentName:"p"},"Mary's, John's, and Boris's laptops"),". Ten en cuenta que la coma (",(0,i.kt)("inlineCode",{parentName:"p"},","),") tambi\xe9n debe escaparse.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~Mom|~Dad|Kids"),": bloque ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," para ",(0,i.kt)("inlineCode",{parentName:"p"},"Kids"),", pero no para ",(0,i.kt)("inlineCode",{parentName:"p"},"Mom")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"Dad"),". Este ejemplo demuestra c\xf3mo especificar varios clientes en una regla.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$client=192.168.0.0/24"),": block ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," para todos los clientes con direcciones IP en el rango de ",(0,i.kt)("inlineCode",{parentName:"p"},"192.168.0.0")," a ",(0,i.kt)("inlineCode",{parentName:"p"},"192.168.0.255"),"."))),(0,i.kt)("h4",{id:"denyallow"},(0,i.kt)("inlineCode",{parentName:"h4"},"denyallow")),(0,i.kt)("p",null,"Puedes usar el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"denyallow")," para excluir dominios de la regla de bloqueo. Para agregar m\xfaltiples dominios a una regla, usa el car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," como separador."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$denyallow=domain1|domain2|...\n")),(0,i.kt)("p",null,"Este modificador permite evitar crear reglas de excepci\xf3n innecesarias cuando nuestra regla de bloqueo abarca demasiados dominios. Es posible que desees bloquear todo excepto un par de dominios TLD. Puedes utilizar el enfoque est\xe1ndar, es decir, reglas como \xe9sta:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"! Bloquear todo.\n/.*/\n\n! Desbloquee un par de TLD.\n@@||com^\n@@||net^\n")),(0,i.kt)("p",null,"El problema con este enfoque es que de esta manera tambi\xe9n desbloquear\xe1s los dominios de seguimiento que se encuentran en esos TLD (es decir, ",(0,i.kt)("inlineCode",{parentName:"p"},"google-analytics.com"),"). Aqu\xed se explica c\xf3mo resolver esto con ",(0,i.kt)("inlineCode",{parentName:"p"},"denyallow"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"*$denyallow=com|net\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"*$denyallow=com|net"),": bloquea todo excepto ",(0,i.kt)("inlineCode",{parentName:"p"},"*.com")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@*$denyallow=com|net"),": desbloquea todo excepto ",(0,i.kt)("inlineCode",{parentName:"p"},"*.com")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$denyallow=sub.example.org"),". bloquea ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org")," pero no bloquea ",(0,i.kt)("inlineCode",{parentName:"p"},"sub.example.org"),"."))),(0,i.kt)("h4",{id:"dnstype"},(0,i.kt)("inlineCode",{parentName:"h4"},"dnstype")),(0,i.kt)("p",null,"El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"dnstype")," permite especificar el tipo de solicitud o respuesta de DNS en el que se activar\xe1 esta regla."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value1|value2|...\n$dnstype=~value1|~value2|~...\n")),(0,i.kt)("p",null,"Los nombres de los tipos no distinguen entre may\xfasculas y min\xfasculas, pero se validan con un conjunto de tipos de registros de recursos DNS (RR) reales."),(0,i.kt)("p",null,"No combines las reglas de exclusi\xf3n con las de inclusi\xf3n. Esto:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=~value1|value2\n")),(0,i.kt)("p",null,"es equivalente a esto:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value2\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=AAAA"),": bloquea las consultas de DNS para las direcciones IPv6 de ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=~A|~CNAME"),": solo permite consultas DNS ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," para ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),", bloquea el resto."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"NOTA:")," Antes de la versi\xf3n ",(0,i.kt)("strong",{parentName:"p"},"v0.108.0,")," AdGuard Home usaba el tipo de solicitud para filtrar los registros de respuesta, a diferencia del tipo de registro de respuesta en s\xed.  Eso caus\xf3 problemas, ya que significaba que no pod\xeda escribir reglas que permitieran ciertos registros ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," en respuestas en solicitudes ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA"),". En ",(0,i.kt)("strong",{parentName:"p"},"v0.108.0")," se cambi\xf3 ese comportamiento, as\xed que ahora esto:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||canon.example.com^$dnstype=~CNAME\n")),(0,i.kt)("p",null,"te permite evitar el filtrado de la siguiente respuesta:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"RESPUESTAS:\n->  ejemplo.com\n    nombre can\xf3nico = canon.ejemplo.com.\n    ttl = 60\n->  canon.example.com\n    direcci\xf3n de Internet = 1.2.3.4\n    ttl = 60\n")),(0,i.kt)("h4",{id:"dnsrewrite"},(0,i.kt)("inlineCode",{parentName:"h4"},"dnsrewrite")),(0,i.kt)("p",null,"El modificador de respuesta ",(0,i.kt)("inlineCode",{parentName:"p"},"dnsrewrite")," permite reemplazar el contenido de la respuesta a la solicitud de DNS para los hosts coincidentes. Ten en cuenta que este modificador en AdGuard Home funciona en todas las reglas, pero en Private AdGuard DNS, solo en las personalizadas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Las reglas con el modificador de respuesta ",(0,i.kt)("inlineCode",{parentName:"strong"},"dnsrewrite")," tienen mayor prioridad que otras reglas en AdGuard Home.")),(0,i.kt)("p",null,"La sintaxis abreviada es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=1.2.3.4\n$dnsrewrite=abcd::1234\n$dnsrewrite=example.net\n$dnsrewrite=REFUSED\n")),(0,i.kt)("p",null,"Las palabras clave DEBEN estar en may\xfasculas (por ejemplo ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR"),"). Las reescrituras de palabras clave tienen prioridad sobre las dem\xe1s y dar\xe1n como resultado una respuesta vac\xeda con un c\xf3digo de respuesta adecuado."),(0,i.kt)("p",null,"La sintaxis completa es de la forma ",(0,i.kt)("inlineCode",{parentName:"p"},"RCODE;RRTYPE;VALUE"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=NOERROR;A;1.2.3.4\n$dnsrewrite=NOERROR;AAAA;abcd::1234\n$dnsrewrite=NOERROR;CNAME;example.net\n$dnsrewrite=REFUSED;;\n")),(0,i.kt)("p",null,"El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"$dnsrewrite")," con el c\xf3digo de respuesta ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR")," tambi\xe9n puede tener campos ",(0,i.kt)("inlineCode",{parentName:"p"},"RRTYPE")," y ",(0,i.kt)("inlineCode",{parentName:"p"},"VALUE")," vac\xedos."),(0,i.kt)("p",null,"El ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME")," es especial porque AdGuard Home resolver\xe1 el host y a\xf1adir\xe1 su informaci\xf3n a la respuesta. Es decir, si ",(0,i.kt)("inlineCode",{parentName:"p"},"example.net")," tiene IP ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),", y el usuario tiene esto en sus reglas de filtro:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||ejemplo.com^$dnsrewrite=ejemplo.net\n! O:\n||ejemplo.com^$dnsrewrite=NOERROR;CNAME;ejemplo.net\n")),(0,i.kt)("p",null,"entonces la respuesta ser\xe1 algo como:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"nslookup example.com my.adguard.local\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"Server: my.adguard.local\nAddress: 127.0.0.1#53\n\nNon-authoritative answer:\nexample.com canonical name = example.net.\nName: example.net\nAddress: 1.2.3.4\n")),(0,i.kt)("p",null,"A continuaci\xf3n, se reescribe el ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME"),". Despu\xe9s, los valores de todos los dem\xe1s registros se suman como una sola respuesta, por lo que esto:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||ejample.com^$dnsrewrite=NOERROR;A;1.2.3.4\n||ejample.com^$dnsrewrite=NOERROR;A;1.2.3.5\n")),(0,i.kt)("p",null,"dar\xe1 como resultado una respuesta con dos registros ",(0,i.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,i.kt)("p",null,"Tipos de RR admitidos actualmente con ejemplos:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||4.3.2.1.in-addr.arpa^$dnsrewrite=NOERROR;PTR;ejemplo.net.")," a\xf1ade un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"PTR"),"para DNS inverso. Invertir solicitudes DNS para ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," al servidor DNS dar\xe1 como resultado ",(0,i.kt)("inlineCode",{parentName:"p"},"example.net"),"."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTA:")," la IP DEBE estar en orden inverso. Consulta ",(0,i.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc1035#section-3.5"},"RFC 1035"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;A;1.2.3.4")," agrega un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," con el valor ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejample.com^$dnsrewrite=NOERROR;AAAA;abcd::1234")," a\xf1ade un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA")," con el valor ",(0,i.kt)("inlineCode",{parentName:"p"},"abcd::1234"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;CNAME;example.org")," agrega un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"CNAME"),". Consulta la explicaci\xf3n anterior.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;HTTPS;32 example.com alpn=h3")," agrega un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS"),". S\xf3lo se admite un subconjunto de valores de par\xe1metros: los valores deben ser ",(0,i.kt)("inlineCode",{parentName:"p"},"contiguos")," y, cuando `",(0,i.kt)("inlineCode",{parentName:"p"},"se"),"espera` una lista de valores, actualmente s\xf3lo se admite un valor:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},'ipv4hint=127.0.0.1             // Compatible.\nipv4hint="127.0.0.1"           // No compatible.\nipv4hint=127.0.0.1,127.0.0.2   // No compatible.\nipv4hint="127.0.0.1,127.0.0.2" // No compatible.\n')),(0,i.kt)("p",{parentName:"li"},"Esto cambiar\xe1 en el futuro.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejample.com^$dnsrewrite=NOERROR;MX;32 example.mail")," a\xf1ade un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"MX")," con valor de precedencia ",(0,i.kt)("inlineCode",{parentName:"p"},"32")," y valor de intercambio ",(0,i.kt)("inlineCode",{parentName:"p"},"example.mail"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejemplo.com^$dnsrewrite=NOERROR;SVCB;32 ejemplo.com alpn=h3")," a\xf1ade un valor ",(0,i.kt)("inlineCode",{parentName:"p"},"SVCB"),". Consulta el ejemplo anterior de ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTPS"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejample.com^$dnsrewrite=NOERROR;TXT;hello_world")," a\xf1ade un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"TXT")," con el valor ",(0,i.kt)("inlineCode",{parentName:"p"},"hello_world"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||_svctype._tcp.example.com^$dnsrewrite=NOERROR;SRV;10 60 8080 example.com")," agrega un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"SRV")," con valor de prioridad ",(0,i.kt)("inlineCode",{parentName:"p"},"10"),", valor de peso ",(0,i.kt)("inlineCode",{parentName:"p"},"60"),", puerto",(0,i.kt)("inlineCode",{parentName:"p"},"8080"),"y destino valor ",(0,i.kt)("inlineCode",{parentName:"p"},"ejemplo.com"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejemplo.com^$dnsrewrite=DOMINIONX;;")," responde con un c\xf3digo ",(0,i.kt)("inlineCode",{parentName:"p"},"NXDOMAIN"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"$dnstype=AAAA,denyallow=example.org,dnsrewrite=NOERROR;;")," responde con un vac\xedo ",(0,i.kt)("inlineCode",{parentName:"p"},"NOERROR")," responde para todas las solicitudes ",(0,i.kt)("inlineCode",{parentName:"p"},"AAAA")," excepto las de ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org"),"."))),(0,i.kt)("p",null,"Las reglas de excepci\xf3n eliminan una o todas las reglas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite")," elimina todas las reglas de reconfiguraci\xf3n de DNS.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite=1.2.3.4")," elimina la regla de reconfiguraci\xf3n de DNS que agrega un registro ",(0,i.kt)("inlineCode",{parentName:"p"},"A")," con el valor ",(0,i.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),"."))),(0,i.kt)("h4",{id:"importante"},(0,i.kt)("inlineCode",{parentName:"h4"},"importante")),(0,i.kt)("p",null,"El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"importante")," aplicado a una regla aumenta su prioridad sobre cualquier otra regla sin el modificador. Incluso sobre reglas de excepci\xf3n b\xe1sicas."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"En este ejemplo:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$important\n@@||example.org^\n")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$important")," bloquear\xe1 todas las solicitudes a ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org")," a pesar de la regla de excepci\xf3n.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"En este ejemplo:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$important\n@@||example.org^$important\n")),(0,i.kt)("p",{parentName:"li"},"la regla de excepci\xf3n tambi\xe9n tiene el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"importante"),", por lo que funcionar\xe1."))),(0,i.kt)("h4",{id:"badfilter"},(0,i.kt)("inlineCode",{parentName:"h4"},"badfilter")),(0,i.kt)("p",null,"Las reglas con el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," deshabilitan otras reglas b\xe1sicas a las que se refieren. Significa que el texto de la regla deshabilitada debe coincidir con el texto de la regla ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," (sin el modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter"),")."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||ejemplo.com$badfilter")," deshabilita ",(0,i.kt)("inlineCode",{parentName:"p"},"||ejemplo.com"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^$badfilter")," deshabilita ",(0,i.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),"."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"NOTA:")," El modificador ",(0,i.kt)("inlineCode",{parentName:"p"},"badfilter")," actualmente no funciona con ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),"reglas de estilo. ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org$badfilter")," ",(0,i.kt)("strong",{parentName:"p"},"no")," deshabilitar\xe1 la regla original ",(0,i.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org"),"."))),(0,i.kt)("h4",{id:"ctag"},(0,i.kt)("inlineCode",{parentName:"h4"},"ctag")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"El modificador ",(0,i.kt)("inlineCode",{parentName:"strong"},"ctag")," solo se puede usar en AdGuard Home.")),(0,i.kt)("p",null,"Permite bloquear dominios solo para tipos espec\xedficos de tags de cliente DNS. Puedes asignar tags a los clientes en la interfaz de usuario de AdGuard Home. En el futuro, planeamos asignar etiquetas autom\xe1ticamente analizando el comportamiento de cada cliente."),(0,i.kt)("p",null,"La sintaxis es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=valor1|valor2|...\n")),(0,i.kt)("p",null,"Si una de las etiquetas del cliente coincide con los valores ",(0,i.kt)("inlineCode",{parentName:"p"},"ctag"),", esta regla se aplica al cliente. La sintaxis para la exclusi\xf3n es:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=~valor1|~valor2|...\n")),(0,i.kt)("p",null,"Si una de las etiquetas del cliente coincide con los valores de exclusi\xf3n ",(0,i.kt)("inlineCode",{parentName:"p"},"ctag"),", esta regla no se aplica al cliente."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplos:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=device_pc|device_phone"),": bloquea ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," para clientes taggeados como ",(0,i.kt)("inlineCode",{parentName:"p"},"device_pc")," o ",(0,i.kt)("inlineCode",{parentName:"p"},"device_phone"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=~device_phone"),":Bloquear ",(0,i.kt)("inlineCode",{parentName:"p"},"example.org")," para todos los clientes excepto aquellos etiquetados como ",(0,i.kt)("inlineCode",{parentName:"p"},"device_phone"),"."))),(0,i.kt)("p",null,"La lista de tags permitidas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por tipo de dispositivo:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_audio"),": dispositivos de audio."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_camera"),": c\xe1maras."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_gameconsole"),": consolas de juegos."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_laptop"),": laptops."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_nas"),": NAS (Network-attached Storages)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_pc"),": PCs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_phone"),": celulares."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_printer"),": impresoras."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_securityalarm"),": alarmas de seguridad."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_tablet"),": tabletas."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_tv"),": televisores."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"device_other"),": otros dispositivos."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por sistema operativo:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_android"),": Android."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_ios"),": iOS."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_linux"),": Linux."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_macos"),": macOS."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_windows"),": Windows."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"os_other"),": otros sistemas operativos."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Por grupo de usuarios:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_admin"),": administradores."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_regular"),": usuarios regulares."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_child"),": ni\xf1os.")))),(0,i.kt)("h2",{id:"etc-hosts-syntax"},(0,i.kt)("inlineCode",{parentName:"h2"},"/etc/hosts"),"-Sintaxis de estilo"),(0,i.kt)("p",null,"Para cada host debe estar presente una sola l\xednea con la siguiente informaci\xf3n:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"IP_address canonical_hostname [aliases...]\n")),(0,i.kt)("p",null,"Los campos de las entradas est\xe1n separados por cualquier n\xfamero de espacios o caracteres de tabulaci\xf3n. El texto desde el car\xe1cter ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," hasta el final de la l\xednea es un comentario y se ignora."),(0,i.kt)("p",null,"Los nombres de host pueden contener solo caracteres alfanum\xe9ricos, guiones menos (",(0,i.kt)("inlineCode",{parentName:"p"},"-"),") y puntos (`",(0,i.kt)("inlineCode",{parentName:"p"},"). Deben comenzar con un car\xe1cter alfab\xe9tico y terminar con un car\xe1cter alfanum\xe9rico. Los alias opcionales proporcionan cambios de nombre, ortograf\xeda alternativa, nombres de host m\xe1s cortos o nombres de host gen\xe9ricos (por ejemplo, "),"localhost`)."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplo:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# Esto es un comentario\n127.0.0.1 example.org ejemplo.info\n127.0.0.1 example.org\n127.0.0.1 example.org # esto tambi\xe9n es un comentario\n")),(0,i.kt)("p",null,"En AdGuard Home, las direcciones IP se utilizan para responder a consultas de DNS para estos dominios. En Private AdGuard DNS, estas direcciones simplemente se bloquean."),(0,i.kt)("h2",{id:"sintaxis-s\xf3lo-para-dominios"},"Sintaxis s\xf3lo para dominios"),(0,i.kt)("p",null,"Una lista simple de nombres de dominio, un nombre por l\xednea."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Ejemplo:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-none"},"# Este es un comentario\nexample.org\nexample.org\nexample.org # esto tambi\xe9n es un comentario\n")),(0,i.kt)("p",null,"Si una cadena no es un dominio v\xe1lido (por ejemplo, ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.org"),"), AdGuard Home considerar\xe1 que se trata de una regla ",(0,i.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"de tipo Adblock"),"."),(0,i.kt)("h2",{id:"compilador-de-hostlists"},"Compilador de hostlists"),(0,i.kt)("p",null,"Si est\xe1s manteniendo una lista de bloqueo y utilizas diferentes fuentes en ella, la ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"},"Compilaci\xf3n de listas de host")," puede ser \xfatil para ti. Es una herramienta sencilla que facilita la compilaci\xf3n de una lista de bloqueo de hosts compatible con AdGuard Home, Private AdGuard DNS o cualquier otro producto AdGuard con filtrado DNS."),(0,i.kt)("p",null,"De lo que es capaz:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Compila una lista de bloqueo \xfanica de varias fuentes.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Excluye las reglas que no necesitas.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Limpia la lista resultante: deduplica, borra reglas no v\xe1lidas y comprime la lista."))))}u.isMDXComponent=!0}}]);