"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[597],{4137:function(e,t,a){a.d(t,{Zo:function(){return s},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},s=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=d(a),c=r,m=u["".concat(l,".").concat(c)]||u[c]||k[c]||o;return a?n.createElement(m,p(p({ref:t},s),{},{components:a})):n.createElement(m,p({ref:t},s))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,p=new Array(o);p[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,p[1]=i;for(var d=2;d<o;d++)p[d]=a[d];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},4812:function(e,t,a){a.r(t),a.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return k}});var n=a(3117),r=a(102),o=(a(7294),a(4137)),p=["components"],i={title:"P\u0159ehled",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},l=void 0,d={unversionedId:"private-dns/api/overview",id:"private-dns/api/overview",title:"P\u0159ehled",description:"\x3c!--",source:"@site/i18n/cs/docusaurus-plugin-content-docs/current/private-dns/api/overview.md",sourceDirName:"private-dns/api",slug:"/private-dns/api/overview",permalink:"/KnowledgeBaseDNS/cs/private-dns/api/overview",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/private-dns/api/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"P\u0159ehled",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},sidebar:"sidebar",previous:{title:"P\u0159ehled",permalink:"/KnowledgeBaseDNS/cs/private-dns/overview"},next:{title:"Odkaz",permalink:"/KnowledgeBaseDNS/cs/private-dns/api/reference"}},s={},k=[{value:"Ov\u011b\u0159ov\xe1n\xed",id:"ov\u011b\u0159ov\xe1n\xed",level:2},{value:"Generov\xe1n\xed p\u0159\xedstupov\xe9ho tokenu",id:"generov\xe1n\xed-p\u0159\xedstupov\xe9ho-tokenu",level:3},{value:"P\u0159\xedklad po\u017eadavku",id:"p\u0159\xedklad-po\u017eadavku",level:4},{value:"P\u0159\xedklad odpov\u011bdi",id:"p\u0159\xedklad-odpov\u011bdi",level:4},{value:"Generov\xe1n\xed p\u0159\xedstupov\xe9ho tokenu z obnovovac\xedho tokenu",id:"generov\xe1n\xed-p\u0159\xedstupov\xe9ho-tokenu-z-obnovovac\xedho-tokenu",level:3},{value:"P\u0159\xedklad po\u017eadavku",id:"p\u0159\xedklad-po\u017eadavku-1",level:4},{value:"P\u0159\xedklad odpov\u011bdi",id:"p\u0159\xedklad-odpov\u011bdi-1",level:4},{value:"Odvol\xe1n\xed obnovovac\xedho tokenu",id:"odvol\xe1n\xed-obnovovac\xedho-tokenu",level:3},{value:"P\u0159\xedklad po\u017eadavku",id:"p\u0159\xedklad-po\u017eadavku-2",level:4},{value:"Authorization endpoint",id:"authorization-endpoint",level:3},{value:"P\u0159\xedstup k rozhran\xed API",id:"p\u0159\xedstup-k-rozhran\xed-api",level:3},{value:"API",id:"api",level:2},{value:"Odkaz",id:"odkaz",level:3},{value:"Specifikace OpenAPI",id:"specifikace-openapi",level:3},{value:"Seznam zm\u011bn",id:"seznam-zm\u011bn",level:3},{value:"Zp\u011btn\xe1 vazba",id:"zp\u011btn\xe1-vazba",level:2}],u={toc:k};function c(e){var t=e.components,a=(0,r.Z)(e,p);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"AdGuard DNS poskytuje rozhran\xed REST API, kter\xe9 m\u016f\u017eete pou\u017e\xedt k integraci sv\xfdch aplikac\xed."),(0,o.kt)("h2",{id:"ov\u011b\u0159ov\xe1n\xed"},"Ov\u011b\u0159ov\xe1n\xed"),(0,o.kt)("h3",{id:"generov\xe1n\xed-p\u0159\xedstupov\xe9ho-tokenu"},"Generov\xe1n\xed p\u0159\xedstupov\xe9ho tokenu"),(0,o.kt)("p",null,"Prove\u010fte po\u017eadavek POST na n\xe1sleduj\xedc\xed URL s dan\xfdmi parametry a vygenerujte ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token"),":"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Parametr"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Popis"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"u\u017eiv. jm\xe9no")),(0,o.kt)("td",{parentName:"tr",align:"left"},"E-mail \xfa\u010dtu")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"heslo")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Heslo \xfa\u010dtu")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"mfa_token"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Dvoufaktorov\xfd ov\u011b\u0159ovac\xed token (pokud je povolen v nastaven\xed \xfa\u010dtu)")))),(0,o.kt)("p",null,"V odpov\u011bdi obdr\u017e\xedte jak ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token"),", tak i ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Platnost ",(0,o.kt)("inlineCode",{parentName:"p"},"code_token")," vypr\u0161\xed po n\u011bkolika zadan\xfdch sekund\xe1ch (reprezentovan\xfdch hodnotou parametrem ",(0,o.kt)("inlineCode",{parentName:"p"},"expires_in")," v odpov\u011bdi). M\u016f\u017eete znovu vygenerovat nov\xfd ",(0,o.kt)("inlineCode",{parentName:"p"},"code_token")," pomoc\xed ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token")," (viz: ",(0,o.kt)("inlineCode",{parentName:"p"},"Generate Access Token from Refresh Token"),").")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token")," je trval\xfd. Odvol\xe1n\xed ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token"),", viz: ",(0,o.kt)("inlineCode",{parentName:"p"},"Revoking a Refresh Token"),"."))),(0,o.kt)("h4",{id:"p\u0159\xedklad-po\u017eadavku"},"P\u0159\xedklad po\u017eadavku"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'username=user%40adguard.com' \\\n    -d 'password=********' \\\n    -d 'mfa_token=727810'\n")),(0,o.kt)("h4",{id:"p\u0159\xedklad-odpov\u011bdi"},"P\u0159\xedklad odpov\u011bdi"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "jTFho_aymtN20pZR5RRSQAzd81I",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2620978\n}\n')),(0,o.kt)("h3",{id:"generov\xe1n\xed-p\u0159\xedstupov\xe9ho-tokenu-z-obnovovac\xedho-tokenu"},"Generov\xe1n\xed p\u0159\xedstupov\xe9ho tokenu z obnovovac\xedho tokenu"),(0,o.kt)("p",null,"P\u0159\xedstupov\xe9 tokeny maj\xed omezenou platnost. Po vypr\u0161en\xed jeho platnosti bude muset va\u0161e aplikace pou\u017e\xedt ",(0,o.kt)("inlineCode",{parentName:"p"},"refresh_token")," a po\u017e\xe1dat o nov\xfd ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token"),"."),(0,o.kt)("p",null,"Pro z\xedsk\xe1n\xed nov\xe9ho p\u0159\xedstupov\xe9ho tokenu prove\u010fte n\xe1sleduj\xedc\xed po\u017eadavek POST se zadan\xfdmi parametry:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Parametr"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Popis"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"refresh_token")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", pomoc\xed kter\xe9ho je t\u0159eba vygenerovat nov\xfd ",(0,o.kt)("inlineCode",{parentName:"td"},"access_token"),".")))),(0,o.kt)("h4",{id:"p\u0159\xedklad-po\u017eadavku-1"},"P\u0159\xedklad po\u017eadavku"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'refresh_token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,o.kt)("h4",{id:"p\u0159\xedklad-odpov\u011bdi-1"},"P\u0159\xedklad odpov\u011bdi"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "xQnT7GYT6Ag--3oY_EcOOdXe-I0",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2627999\n}\n')),(0,o.kt)("h3",{id:"odvol\xe1n\xed-obnovovac\xedho-tokenu"},"Odvol\xe1n\xed obnovovac\xedho tokenu"),(0,o.kt)("p",null,"Chcete-li odvolat obnovovac\xed token, prove\u010fte n\xe1sleduj\xedc\xed po\u017eadavek POST s dan\xfdmi parametry:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/revoke_token")),(0,o.kt)("h4",{id:"p\u0159\xedklad-po\u017eadavku-2"},"P\u0159\xedklad po\u017eadavku"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.com/oapi/v1/revoke_token' -i -X POST \\\n    -d 'token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Parametr"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Popis"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"refresh_token")),(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", kter\xfd m\xe1 b\xfdt odvol\xe1n")))),(0,o.kt)("h3",{id:"authorization-endpoint"},"Authorization endpoint"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"To access this endpoint, you need to contact us at ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"mailto:devteam@adguard.com"},"devteam@adguard.com")),". Please describe the reason and use cases for this endpoint, as well as provide the redirect URI. Upon approval, you will receive a unique client identifier, which should be used for the ",(0,o.kt)("strong",{parentName:"p"},"client_id")," parameter.")),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endpoint is used to interact with the resource owner and get the authorization to access the protected resource."),(0,o.kt)("p",null,"The service redirects you to AdGuard to authenticate (if you are not already logged in) and then back to your application."),(0,o.kt)("p",null,"The request parameters of the ",(0,o.kt)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endpoint are:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Parametr"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Popis"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"response_type")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Tells the authorization server which grant to execute")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"client_id")),(0,o.kt)("td",{parentName:"tr",align:"left"},"The ID of the OAuth client that asks for authorization")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"redirect_uri")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Contains a URL. A successful response from this endpoint results in a redirect to this URL")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"state")),(0,o.kt)("td",{parentName:"tr",align:"left"},"An opaque value used for security purposes. If this request parameter is set in the request, it is returned to the application as part of the ",(0,o.kt)("strong",{parentName:"td"},"redirect_uri"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},(0,o.kt)("strong",{parentName:"td"},"aid")),(0,o.kt)("td",{parentName:"tr",align:"left"},"Affiliate identifier")))),(0,o.kt)("p",null,"Nap\u0159:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"https://api.adguard-dns.io/oapi/v1/oauth_authorize?response_type=token&client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&state=1jbmuc0m9WTr1T6dOO82\n")),(0,o.kt)("p",null,"To inform the authorization server which grant type to use, the ",(0,o.kt)("strong",{parentName:"p"},"response_type")," request parameter is used as follows:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For the Implicit grant, use ",(0,o.kt)("strong",{parentName:"li"},"response_type=token")," to include an access token.")),(0,o.kt)("p",null,"A successful response is ",(0,o.kt)("strong",{parentName:"p"},"302 Found"),", which triggers a redirect to ",(0,o.kt)("strong",{parentName:"p"},"redirect_uri")," (which is a request parameter). The response parameters are embedded in the fragment component (the part after ",(0,o.kt)("inlineCode",{parentName:"p"},"#"),") of the ",(0,o.kt)("strong",{parentName:"p"},"redirect_uri")," parameter in the ",(0,o.kt)("strong",{parentName:"p"},"Location")," header."),(0,o.kt)("p",null,"Nap\u0159:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"HTTP/1.1 302 Found\nLocation: REDIRECT_URI#access_token=...&token_type=Bearer&expires_in=3600&state=1jbmuc0m9WTr1T6dOO82\n")),(0,o.kt)("h3",{id:"p\u0159\xedstup-k-rozhran\xed-api"},"P\u0159\xedstup k rozhran\xed API"),(0,o.kt)("p",null,"Po vygenerov\xe1n\xed p\u0159\xedstupov\xfdch a obnovovac\xedch token\u016f lze vol\xe1n\xed API prov\xe1d\u011bt pomoc\xed p\u0159ed\xe1n\xed p\u0159\xedstupov\xe9ho tokenu v z\xe1hlav\xed."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xe1zev z\xe1hlav\xed by m\u011bl b\xfdt ",(0,o.kt)("inlineCode",{parentName:"li"},"Autorization")),(0,o.kt)("li",{parentName:"ul"},"Hodnota z\xe1hlav\xed by m\u011bla b\xfdt ",(0,o.kt)("inlineCode",{parentName:"li"},"Bearer {access_token}"))),(0,o.kt)("h2",{id:"api"},"API"),(0,o.kt)("h3",{id:"odkaz"},"Odkaz"),(0,o.kt)("p",null,"Viz odkaz na metody ",(0,o.kt)("a",{parentName:"p",href:"/KnowledgeBaseDNS/cs/private-dns/api/reference"},"zde"),"."),(0,o.kt)("h3",{id:"specifikace-openapi"},"Specifikace OpenAPI"),(0,o.kt)("p",null,"Specifikace OpenAPI je k dispozici na ",(0,o.kt)("a",{parentName:"p",href:"https://api.adguard-dns.io/static/swagger/openapi.json"},"https://api.adguard-dns.io/static/swagger/openapi.json"),"."),(0,o.kt)("p",null,"K zobrazen\xed seznamu dostupn\xfdch metod API m\u016f\u017eete pou\u017e\xedt r\u016fzn\xe9 n\xe1stroje. Tento soubor m\u016f\u017eete otev\u0159\xedt nap\u0159\xedklad v ",(0,o.kt)("a",{parentName:"p",href:"https://editor.swagger.io/"},"https://editor.swagger.io/"),"."),(0,o.kt)("h3",{id:"seznam-zm\u011bn"},"Seznam zm\u011bn"),(0,o.kt)("p",null,"Kompletn\xed seznam zm\u011bn AdGuard DNS API je k dispozici na ",(0,o.kt)("a",{parentName:"p",href:"/KnowledgeBaseDNS/cs/private-dns/api/changelog"},"t\xe9to str\xe1nce"),"."),(0,o.kt)("h2",{id:"zp\u011btn\xe1-vazba"},"Zp\u011btn\xe1 vazba"),(0,o.kt)("p",null,"Pokud si p\u0159ejete, aby bylo toto rozhran\xed API roz\u0161\xed\u0159eno o nov\xe9 metody, napi\u0161te n\xe1m pros\xedm na adresu. ",(0,o.kt)("inlineCode",{parentName:"p"},"devteam@adguard.com")," a sd\u011blte n\xe1m, co byste cht\u011bli p\u0159idat."))}c.isMDXComponent=!0}}]);