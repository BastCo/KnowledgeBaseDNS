"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[984],{5680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>u});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),d=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(o.Provider,{value:n},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},y=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=g(e,["components","mdxType","originalType","parentName"]),s=d(t),y=r,u=s["".concat(o,".").concat(y)]||s[y]||m[y]||i;return t?a.createElement(u,l(l({ref:n},p),{},{components:t})):a.createElement(u,l({ref:n},p))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=y;var g={};for(var o in n)hasOwnProperty.call(n,o)&&(g[o]=n[o]);g.originalType=e,g[s]="string"==typeof e?e:r,l[1]=g;for(var d=2;d<i;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}y.displayName="MDXCreateElement"},9437:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>g,toc:()=>d});var a=t(9668),r=(t(6540),t(5680));const i={title:"Oversigt",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},l=void 0,g={unversionedId:"private-dns/api/overview",id:"private-dns/api/overview",title:"Oversigt",description:"\x3c!--",source:"@site/i18n/da/docusaurus-plugin-content-docs/current/private-dns/api/overview.md",sourceDirName:"private-dns/api",slug:"/private-dns/api/overview",permalink:"/KnowledgeBaseDNS/da/private-dns/api/overview",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/private-dns/api/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Oversigt",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},sidebar:"sidebar",previous:{title:"Oversigt",permalink:"/KnowledgeBaseDNS/da/private-dns/overview"},next:{title:"Reference",permalink:"/KnowledgeBaseDNS/da/private-dns/api/reference"}},o={},d=[{value:"Godkendelse",id:"godkendelse",level:2},{value:"Gener\xe9r adgangstoken",id:"gener\xe9r-adgangstoken",level:3},{value:"Eksempelanmodning",id:"eksempelanmodning",level:4},{value:"Eksempelsvar",id:"eksempelsvar",level:4},{value:"Generere adgangstoken fra Refresh-token",id:"generere-adgangstoken-fra-refresh-token",level:3},{value:"Eksempelanmodning",id:"eksempelanmodning-1",level:4},{value:"Eksempelsvar",id:"eksempelsvar-1",level:4},{value:"Oph\xe6velse af et Refresh-token",id:"oph\xe6velse-af-et-refresh-token",level:3},{value:"Anmodningseksempel",id:"anmodningseksempel",level:4},{value:"Godkendelsesendepunkt",id:"godkendelsesendepunkt",level:3},{value:"Adgang til API",id:"adgang-til-api",level:3},{value:"API",id:"api",level:2},{value:"Reference",id:"reference",level:3},{value:"OpenAPI-specifikation",id:"openapi-specifikation",level:3},{value:"\xc6ndringslog",id:"\xe6ndringslog",level:3},{value:"Feedback",id:"feedback",level:2}],p={toc:d},s="wrapper";function m(e){let{components:n,...t}=e;return(0,r.yg)(s,(0,a.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"AdGuard DNS tilbyder en REST API, hvormed apps integreres i den."),(0,r.yg)("h2",{id:"godkendelse"},"Godkendelse"),(0,r.yg)("h3",{id:"gener\xe9r-adgangstoken"},"Gener\xe9r adgangstoken"),(0,r.yg)("p",null,"Foretag en POST-anmodning for flg. URL med de givne parametre for at generere et ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token"),":"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"brugernavn")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Kontoe-mail")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"adgangskode")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Kontoadgangskode")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},"mfa_token"),(0,r.yg)("td",{parentName:"tr",align:"left"},"Tofaktorgodkendelsestoken (hvis aktiveret i kontoindstillinger)")))),(0,r.yg)("p",null,"I svaret vil b\xe5de ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," og ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," fremg\xe5."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," udl\xf8ber efter et antal angivne sekunder (jf. svarets ",(0,r.yg)("inlineCode",{parentName:"p"},"expires_in"),"-parameter). Et nyt ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," kan genereres vha. ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," (se: ",(0,r.yg)("inlineCode",{parentName:"p"},"Generere adgangstoken fra Refresh-token"),").")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," er permanent. For at oph\xe6ve et ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token"),", se: ",(0,r.yg)("inlineCode",{parentName:"p"},"Oph\xe6velse af et Refresh-token"),"."))),(0,r.yg)("h4",{id:"eksempelanmodning"},"Eksempelanmodning"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'username=user%40adguard.com' \\\n    -d 'password=********' \\\n    -d 'mfa_token=727810'\n")),(0,r.yg)("h4",{id:"eksempelsvar"},"Eksempelsvar"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "jTFho_aymtN20pZR5RRSQAzd81I",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2620978\n}\n')),(0,r.yg)("h3",{id:"generere-adgangstoken-fra-refresh-token"},"Generere adgangstoken fra Refresh-token"),(0,r.yg)("p",null,"Et adgangstoken har en begr\xe6nset gyldighedsperiode. N\xe5r det udl\xf8ber, vil appen skulle bruge ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh-token")," ifm. anmodning om et nyt ",(0,r.yg)("inlineCode",{parentName:"p"},"adgangstoken"),"."),(0,r.yg)("p",null,"Foretag flg. POST-anmodning med de givne parametre for at f\xe5 et nyt adgangstoken:"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"refresh_token")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", hvormed et nyt adgangstoken skal genereres.")))),(0,r.yg)("h4",{id:"eksempelanmodning-1"},"Eksempelanmodning"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'refresh_token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,r.yg)("h4",{id:"eksempelsvar-1"},"Eksempelsvar"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "xQnT7GYT6Ag--3oY_EcOOdXe-I0",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2627999\n}\n')),(0,r.yg)("h3",{id:"oph\xe6velse-af-et-refresh-token"},"Oph\xe6velse af et Refresh-token"),(0,r.yg)("p",null,"For at oph\xe6ve et opdateringstoken skal flg. POST-anmodning foretages med de givne parametre:"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/revoke_token")),(0,r.yg)("h4",{id:"anmodningseksempel"},"Anmodningseksempel"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.com/oapi/v1/revoke_token' -i -X POST \\\n    -d 'token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"refresh_token")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", der skal oph\xe6ves")))),(0,r.yg)("h3",{id:"godkendelsesendepunkt"},"Godkendelsesendepunkt"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"For at tilg\xe5 dette endepunkt, kontakt os p\xe5 ",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("a",{parentName:"strong",href:"mailto:devteam@adguard.com"},"devteam@adguard.com")),". Beskriv venligst \xe5rsagen til og brugstilf\xe6lde for dette endepunkt, samt angiv omdirigerings-URI'en. Efter godkendelse fremsendes et unikt klientidentifikator til brug for parameteren ",(0,r.yg)("strong",{parentName:"p"},"client_id"),".")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endepunktet bruges til at interager med ressourceejeren og opn\xe5 godkendelse til at tilg\xe5 den beskyttede ressource."),(0,r.yg)("p",null,"Man omdirigeres af tjenesten til AdGuard for godkendelse (hvis man ikke allerede er logget ind) og dern\xe6st tilbage til sin applikation."),(0,r.yg)("p",null,"Foresp\xf8rgselsparametrene til ",(0,r.yg)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endepunktet er:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"response_type")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Fort\xe6ller godkendelsesserveren, hvilken tildeling, der skal eksekveres")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"client_id")),(0,r.yg)("td",{parentName:"tr",align:"left"},"ID'et p\xe5 den OAuth-klient, der beder om godkendelse")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"redirect_uri")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Indeholder en URL. Et vellykket svar fra dette endepunkt resulterer i en omdirigering til denne URL")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"tilstand")),(0,r.yg)("td",{parentName:"tr",align:"left"},"En uigennemsigtig v\xe6rdi brugt til sikkerhedsform\xe5l. Er denne foresp\xf8rgselsparameter angivet i foresp\xf8rgslen, returneres den til applikationen som en del af ",(0,r.yg)("strong",{parentName:"td"},"redirect_uri"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"aid")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Affilieret-identifikator")))),(0,r.yg)("p",null,"F.eks.:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"https://api.adguard-dns.io/oapi/v1/oauth_authorize?response_type=token&client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&state=1jbmuc0m9WTr1T6dOO82\n")),(0,r.yg)("p",null,"For at informere godkendelsesserveren om, hvilken tildelingstype, der skal bruges, bruges ",(0,r.yg)("strong",{parentName:"p"},"response_type"),"-foresp\xf8rgselsparameteren som f\xf8lger:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"For den implicitte tildeling, brug ",(0,r.yg)("strong",{parentName:"li"},"response_type=token")," til at inkludere et adgangstoken.")),(0,r.yg)("p",null,"Et vellykket svar er ",(0,r.yg)("strong",{parentName:"p"},"302 Found"),", der udl\xf8ser en omdirigering til ",(0,r.yg)("strong",{parentName:"p"},"redirect_uri")," (som er en anmodningsparameter). Svarparametrene er indlejret i fragmentkomponenten (delen efter ",(0,r.yg)("inlineCode",{parentName:"p"},"#"),") i ",(0,r.yg)("strong",{parentName:"p"},"redirect_uri"),"-parameteren i headeren ",(0,r.yg)("strong",{parentName:"p"},"Location"),"."),(0,r.yg)("p",null,"F.eks.:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"HTTP/1.1 302 Found\nLocation: REDIRECT_URI#access_token=...&token_type=Bearer&expires_in=3600&state=1jbmuc0m9WTr1T6dOO82\n")),(0,r.yg)("h3",{id:"adgang-til-api"},"Adgang til API"),(0,r.yg)("p",null,"N\xe5r f\xf8rst adgangs- og refresh-tokenerne er genereret, kan API-kald foretages ved at videregive adgangstokenet i headeren."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Header-navnet skal v\xe6re ",(0,r.yg)("inlineCode",{parentName:"li"},"Authorization")),(0,r.yg)("li",{parentName:"ul"},"Header-v\xe6rdien skal v\xe6re ",(0,r.yg)("inlineCode",{parentName:"li"},"Bearer {access_token}"))),(0,r.yg)("h2",{id:"api"},"API"),(0,r.yg)("h3",{id:"reference"},"Reference"),(0,r.yg)("p",null,"Se metodereferencen ",(0,r.yg)("a",{parentName:"p",href:"/KnowledgeBaseDNS/da/private-dns/api/reference"},"h\xe9r"),"."),(0,r.yg)("h3",{id:"openapi-specifikation"},"OpenAPI-specifikation"),(0,r.yg)("p",null,"OpenAPI-specifikationen er tilg\xe6ngelig via ",(0,r.yg)("a",{parentName:"p",href:"https://api.adguard-dns.io/static/swagger/openapi.json"},"https://api.adguard-dns.io/static/swagger/openapi.json"),"."),(0,r.yg)("p",null,"Forskellige v\xe6rkt\xf8jer kan bruges til at se listen over tilg\xe6ngelige API-metoder. Filen kan f.eks. \xe5bnes i ",(0,r.yg)("a",{parentName:"p",href:"https://editor.swagger.io/"},"https://editor.swagger.io/"),"."),(0,r.yg)("h3",{id:"\xe6ndringslog"},"\xc6ndringslog"),(0,r.yg)("p",null,"Den komplette AdGuard DNS API-\xe6ndringslog er tilg\xe6ngelig p\xe5 ",(0,r.yg)("a",{parentName:"p",href:"/KnowledgeBaseDNS/da/private-dns/api/changelog"},"denne side"),"."),(0,r.yg)("h2",{id:"feedback"},"Feedback"),(0,r.yg)("p",null,"\xd8nskes denne API udvidet med nye metoder, s\xe5 send os en e-mail via ",(0,r.yg)("inlineCode",{parentName:"p"},"devteam@adguard.com")," med information om, hvad der \xf8nskes tilf\xf8jet."))}m.isMDXComponent=!0}}]);