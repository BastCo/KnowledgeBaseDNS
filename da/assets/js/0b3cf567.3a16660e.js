"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[321],{5680:(e,n,a)=>{a.d(n,{xA:()=>o,yg:()=>N});var r=a(6540);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var s=r.createContext({}),g=function(e){var n=r.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):p(p({},n),e)),a},o=function(e){var n=g(e.components);return r.createElement(s.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},y=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,l=e.originalType,s=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),m=g(a),y=t,N=m["".concat(s,".").concat(y)]||m[y]||d[y]||l;return a?r.createElement(N,p(p({ref:n},o),{},{components:a})):r.createElement(N,p({ref:n},o))}));function N(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var l=a.length,p=new Array(l);p[0]=y;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[m]="string"==typeof e?e:t,p[1]=i;for(var g=2;g<l;g++)p[g]=a[g];return r.createElement.apply(null,p)}return r.createElement.apply(null,a)}y.displayName="MDXCreateElement"},4145:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>g});var r=a(9668),t=(a(6540),a(5680));const l={title:"Ops\xe6tningsfil",sidebar_position:2},p=void 0,i={unversionedId:"dns-client/configuration",id:"dns-client/configuration",title:"Ops\xe6tningsfil",description:"Se filen config.dist.yml for et fuldst\xe6ndigt eksempel p\xe5 en YAML ops\xe6tningsfil med kommentarer.",source:"@site/i18n/da/docusaurus-plugin-content-docs/current/dns-client/configuration.md",sourceDirName:"dns-client",slug:"/dns-client/configuration",permalink:"/KnowledgeBaseDNS/da/dns-client/configuration",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/dns-client/configuration.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Ops\xe6tningsfil",sidebar_position:2},sidebar:"sidebar",previous:{title:"Oversigt",permalink:"/KnowledgeBaseDNS/da/dns-client/overview"},next:{title:"Milj\xf8",permalink:"/KnowledgeBaseDNS/da/dns-client/environment"}},s={},g=[{value:"<code>dns</code>",id:"dns",level:2},{value:"<code>cache</code>",id:"dns-cache",level:3},{value:"<code>server</code>",id:"dns-server",level:3},{value:"<code>bootstrap</code>",id:"dns-bootstrap",level:3},{value:"<code>upstream</code>",id:"dns-upstream",level:3},{value:"<code>fallback</code>",id:"dns-fallback",level:3},{value:"<code>debug</code>",id:"debug",level:2},{value:"<code>pprof</code>",id:"debug-pprof",level:3},{value:"<code>log</code>",id:"log",level:2}],o={toc:g},m="wrapper";function d(e){let{components:n,...a}=e;return(0,t.yg)(m,(0,r.A)({},o,a,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"Se filen ",(0,t.yg)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardDNSClient/blob/master/config.dist.yaml"},(0,t.yg)("inlineCode",{parentName:"a"},"config.dist.yml"))," for et fuldst\xe6ndigt eksempel p\xe5 en ",(0,t.yg)("a",{parentName:"p",href:"https://yaml.org/"},"YAML")," ops\xe6tningsfil med kommentarer."),(0,t.yg)("h2",{id:"dns"},(0,t.yg)("inlineCode",{parentName:"h2"},"dns")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"dns"),"-objektet ops\xe6tter adf\xe6rden for DNS-serveren. Den har flg. egenskaber:"),(0,t.yg)("h3",{id:"dns-cache"},(0,t.yg)("inlineCode",{parentName:"h3"},"cache")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"cache"),"-objektet ops\xe6tter caching af DNS-foresp\xf8rgselsresultaterne. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"'enabled': Hvorvidt DNS-resultaterne skal cachelagres eller ej."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"true"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"size"),": Den maksimale st\xf8rrelse af DNS-resultatcachen som menneskelig l\xe6sbar datast\xf8rrelse. Den skal v\xe6re st\xf8rre end nul, hvis ",(0,t.yg)("inlineCode",{parentName:"p"},"enabled")," er ",(0,t.yg)("inlineCode",{parentName:"p"},"true"),"."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Example:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"128 MB"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"client_size"),": Maks. st\xf8rrelse p\xe5 DNS-resultatcachen for hver opsat klients adresse eller undernetv\xe6rk som menneskelig l\xe6sbar datast\xf8rrelse. Den skal v\xe6re st\xf8rre end nul, hvis ",(0,t.yg)("inlineCode",{parentName:"p"},"enabled")," er ",(0,t.yg)("inlineCode",{parentName:"p"},"true"),"."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Example:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"4 MB")))),(0,t.yg)("h3",{id:"dns-server"},(0,t.yg)("inlineCode",{parentName:"h3"},"server")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"server"),"-objektet ops\xe6tter h\xe5ndteringen af indg\xe5ende foresp\xf8rgsler. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"listen_addresses"),": S\xe6ttet af adresser med porte at lytte p\xe5."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Egenskabseksempel:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"'listen_addresses':\n    - address: '127.0.0.1:53'\n    - address: '[::1]:53'\n")))),(0,t.yg)("h3",{id:"dns-bootstrap"},(0,t.yg)("inlineCode",{parentName:"h3"},"bootstrap")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"bootstrap"),"-objektet ops\xe6tter opl\xf8sningen af ",(0,t.yg)("a",{parentName:"p",href:"#dns-upstream"},"upstream")," serveradresser. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"servers"),": Listen over servere til at opl\xf8se v\xe6rtsnavnene p\xe5 upstream-servere."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Egenskabseksempel:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"'servers':\n    - address: '8.8.8.8:53'\n    - address: '192.168.1.1:53'\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"'timeout': Timeout for bootstrap DNS-foresp\xf8rgsler som en menneskelig l\xe6sbar varighed."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Example:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"2 s")))),(0,t.yg)("h3",{id:"dns-upstream"},(0,t.yg)("inlineCode",{parentName:"h3"},"upstream")),(0,t.yg)("p",null,"'upstream'-objektet ops\xe6tter den faktiske foresp\xf8rgselsopl\xf8sning. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"groups"),": S\xe6ttet af upstream-servere med gruppens navn som n\xf8gle. Den har flg. felter:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"address"),": Opstr\xf8msserveradresse."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"'8.8.8.8:53'"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"match"),": Listen over kriterier foresp\xf8rgslen skal matches imod. Hver post kan indeholde flg. egenskaber:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"question_domain"),": Dom\xe6net eller et suffiks af dom\xe6net, som s\xe6ttet af upstream-servere skal bruges til at opl\xf8se."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"'mycompany.local'"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"client"),": Klientadressen eller et undernet af klientadressen, hvorfra s\xe6ttet af upstream-servere skal opl\xf8se foresp\xf8rgsler. Den m\xe5 ikke have betydende bits uden for undernetmasken."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"'192.0.2.0/24'")))),(0,t.yg)("admonition",{parentName:"li",type:"note"},(0,t.yg)("p",{parentName:"admonition"},"Egenskaber angivet i en enkelt post kombineres med et logisk AND. Poster kombineres med et logisk OR.")),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Egenskabseksempel:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"'match':\n    - question_domain: 'mycompany.local'\n    client: '192.168.1.0/24'\n    - question_domain: 'mycompany.external'\n    - client: '1.2.3.4'\n")))),(0,t.yg)("admonition",{parentName:"li",type:"info"},(0,t.yg)("p",{parentName:"admonition"},(0,t.yg)("inlineCode",{parentName:"p"},"groups")," skal indeholde mindst \xe9n post med navnet ",(0,t.yg)("inlineCode",{parentName:"p"},"default")," og evt. en post med navnet ",(0,t.yg)("inlineCode",{parentName:"p"},"private"),", og begge skal ikke have nogen ",(0,t.yg)("inlineCode",{parentName:"p"},"match"),"-egenskab.")),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"default"),"-gruppen bruges, n\xe5r ingen match eksisterer blandt de \xf8vrige grupper. ",(0,t.yg)("inlineCode",{parentName:"p"},"private"),"-gruppen vil blive brugt til opl\xf8sning af PTR-foresp\xf8rgsler for de private IP-adresser. S\xe5danne foresp\xf8rgsler besvares med ",(0,t.yg)("inlineCode",{parentName:"p"},"NXDOMAIN"),", hvis ingen ",(0,t.yg)("inlineCode",{parentName:"p"},"private"),"-gruppe er defineret.")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"'timeout': Timeout for upstream DNS-foresp\xf8rgsler som en menneskelig l\xe6sbar varighed."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"2s")))),(0,t.yg)("h3",{id:"dns-fallback"},(0,t.yg)("inlineCode",{parentName:"h3"},"fallback")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"fallback"),"-objektet ops\xe6tter adf\xe6rden for DNS-serveren i tilf\xe6lde af fejl. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"servers"),": Listen over servere til brug ved manglende svar fra den aktuelle ",(0,t.yg)("a",{parentName:"p",href:"#dns-upstream"},"upstream"),"."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Egenskabseksempel:")),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-yaml"},"'servers':\n    - address: 'tls://94.140.14.140'\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"'timeout': Timeout for fallback DNS-foresp\xf8rgsler som en menneskelig l\xe6sbar varighed."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"2s")))),(0,t.yg)("h2",{id:"debug"},(0,t.yg)("inlineCode",{parentName:"h2"},"debug")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"debug"),"-objektet ops\xe6tter fejlfindingsfunktionerne. Den har flg. egenskaber:"),(0,t.yg)("h3",{id:"debug-pprof"},(0,t.yg)("inlineCode",{parentName:"h3"},"pprof")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"pprof"),"-objektet ops\xe6tter ",(0,t.yg)("a",{parentName:"p",href:"https://golang.org/pkg/net/http/pprof"},(0,t.yg)("inlineCode",{parentName:"a"},"pprof"))," HTTP-rutiner. Den har flg. egenskaber:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"port"),": Porten, der skal lyttes til efter fejlfindings HTTP-foresp\xf8rgsler p\xe5 localhost."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"6060"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"'enabled': Hvorvidt fejlretningsprofileringen er aktiveret eller ej."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"true")))),(0,t.yg)("h2",{id:"log"},(0,t.yg)("inlineCode",{parentName:"h2"},"log")),(0,t.yg)("p",null,'"log"-objektet ops\xe6tter logningen. Den har flg. egenskaber:'),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"output"),": Det output, hvortil logger skrives."),(0,t.yg)("admonition",{parentName:"li",type:"note"},(0,t.yg)("p",{parentName:"admonition"},"Logposter skrevet til systemloggen er i tekstformat (se nedenfor) og bruger systemets tidsstempling.")),(0,t.yg)("p",{parentName:"li"},"Gyldige v\xe6rdier:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"syslog")," betyder, at den platformsspecifikke systemlog bruges, dvs. syslog til Linux og Event Log til Windows.")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},'"stdout" for standard outputstr\xf8m.')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},'"stdout" for standard fejlstr\xf8m.')),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"Absolut sti til logfilen."))),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"/home/user/logs")),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"C:\\Users\\user\\logs.txt")),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"syslog"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"format"),": Angiver formatet for logposterne."),(0,t.yg)("p",{parentName:"li"},"Gyldige v\xe6rdier:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"standard"),": Et simpelt format. Eksempel:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-none"},"INFO service started prefix=program addr=127.0.0.1:53\n"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"json"),": Et struktureret JSON-format. Eksempel:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-json"},'{"level":"INFO","msg":"service started","prefix":"program","addr":"127.0.0.1:53"}\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"jsonhybrid"),": Samme som ",(0,t.yg)("inlineCode",{parentName:"p"},"json"),", men med et begr\xe6nset antal felter. Eksempel:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-json"},'{"level":"INFO","msg":"service started, attrs: prefix=program addr=127.0.0.1:53"}\n'))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"text"),": Et struktureret tekstformat. Eksempel:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{parentName:"pre",className:"language-none"},'level=INFO msg="service started" prefix=program addr=127.0.0.1:53\n')))),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"default"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"timestamp"),": Angiver, om et tidsstempel skal medtages i logposterne."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"false"))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},(0,t.yg)("inlineCode",{parentName:"p"},"verbose"),": Angiver om loggen skal v\xe6re mere udf\xf8rlig."),(0,t.yg)("p",{parentName:"li"},(0,t.yg)("strong",{parentName:"p"},"Eks.:")," ",(0,t.yg)("inlineCode",{parentName:"p"},"false")))))}d.isMDXComponent=!0}}]);