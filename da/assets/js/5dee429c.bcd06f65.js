"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[984],{5680:(e,t,n)=>{n.d(t,{xA:()=>s,yg:()=>u});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g=a.createContext({}),p=function(e){var t=a.useContext(g),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(g.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,g=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),y=r,u=d["".concat(g,".").concat(y)]||d[y]||m[y]||i;return n?a.createElement(u,o(o({ref:t},s),{},{components:n})):a.createElement(u,o({ref:t},s))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=y;var l={};for(var g in t)hasOwnProperty.call(t,g)&&(l[g]=t[g]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},9437:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(9668),r=(n(6540),n(5680));const i={title:"Oversigt",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},o=void 0,l={unversionedId:"private-dns/api/overview",id:"private-dns/api/overview",title:"Oversigt",description:"\x3c!--",source:"@site/i18n/da/docusaurus-plugin-content-docs/current/private-dns/api/overview.md",sourceDirName:"private-dns/api",slug:"/private-dns/api/overview",permalink:"/KnowledgeBaseDNS/da/private-dns/api/overview",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/private-dns/api/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Oversigt",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:3},sidebar:"sidebar",previous:{title:"Oversigt",permalink:"/KnowledgeBaseDNS/da/private-dns/overview"},next:{title:"Reference",permalink:"/KnowledgeBaseDNS/da/private-dns/api/reference"}},g={},p=[{value:"Godkendelse",id:"godkendelse",level:2},{value:"Gener\xe9r adgangstoken",id:"gener\xe9r-adgangstoken",level:3},{value:"Eksempelanmodning",id:"eksempelanmodning",level:4},{value:"Eksempelsvar",id:"eksempelsvar",level:4},{value:"Generere adgangstoken fra Refresh-token",id:"generere-adgangstoken-fra-refresh-token",level:3},{value:"Eksempelanmodning",id:"eksempelanmodning-1",level:4},{value:"Eksempelsvar",id:"eksempelsvar-1",level:4},{value:"Oph\xe6velse af et Refresh-token",id:"oph\xe6velse-af-et-refresh-token",level:3},{value:"Anmodningseksempel",id:"anmodningseksempel",level:4},{value:"Authorization endpoint",id:"authorization-endpoint",level:3},{value:"Adgang til API",id:"adgang-til-api",level:3},{value:"API",id:"api",level:2},{value:"Reference",id:"reference",level:3},{value:"OpenAPI-specifikation",id:"openapi-specifikation",level:3},{value:"\xc6ndringslog",id:"\xe6ndringslog",level:3},{value:"Feedback",id:"feedback",level:2}],s={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"AdGuard DNS tilbyder en REST API, hvormed apps integreres i den."),(0,r.yg)("h2",{id:"godkendelse"},"Godkendelse"),(0,r.yg)("h3",{id:"gener\xe9r-adgangstoken"},"Gener\xe9r adgangstoken"),(0,r.yg)("p",null,"Foretag en POST-anmodning for flg. URL med de givne parametre for at generere et ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token"),":"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"brugernavn")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Kontoe-mail")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"adgangskode")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Kontoadgangskode")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},"mfa_token"),(0,r.yg)("td",{parentName:"tr",align:"left"},"Tofaktorgodkendelsestoken (hvis aktiveret i kontoindstillinger)")))),(0,r.yg)("p",null,"I svaret vil b\xe5de ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," og ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," fremg\xe5."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," udl\xf8ber efter et antal angivne sekunder (jf. svarets ",(0,r.yg)("inlineCode",{parentName:"p"},"expires_in"),"-parameter). Et nyt ",(0,r.yg)("inlineCode",{parentName:"p"},"access_token")," kan genereres vha. ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," (se: ",(0,r.yg)("inlineCode",{parentName:"p"},"Generere adgangstoken fra Refresh-token"),").")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token")," er permanent. For at oph\xe6ve et ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh_token"),", se: ",(0,r.yg)("inlineCode",{parentName:"p"},"Oph\xe6velse af et Refresh-token"),"."))),(0,r.yg)("h4",{id:"eksempelanmodning"},"Eksempelanmodning"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'username=user%40adguard.com' \\\n    -d 'password=********' \\\n    -d 'mfa_token=727810'\n")),(0,r.yg)("h4",{id:"eksempelsvar"},"Eksempelsvar"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "jTFho_aymtN20pZR5RRSQAzd81I",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2620978\n}\n')),(0,r.yg)("h3",{id:"generere-adgangstoken-fra-refresh-token"},"Generere adgangstoken fra Refresh-token"),(0,r.yg)("p",null,"Et adgangstoken har en begr\xe6nset gyldighedsperiode. N\xe5r det udl\xf8ber, vil appen skulle bruge ",(0,r.yg)("inlineCode",{parentName:"p"},"refresh-token")," ifm. anmodning om et nyt ",(0,r.yg)("inlineCode",{parentName:"p"},"adgangstoken"),"."),(0,r.yg)("p",null,"Foretag flg. POST-anmodning med de givne parametre for at f\xe5 et nyt adgangstoken:"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/oauth_token")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"refresh_token")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", hvormed et nyt adgangstoken skal genereres.")))),(0,r.yg)("h4",{id:"eksempelanmodning-1"},"Eksempelanmodning"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.io/oapi/v1/oauth_token' -i -X POST \\\n    -H 'Content-Type: application/x-www-form-urlencoded' \\\n    -d 'refresh_token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,r.yg)("h4",{id:"eksempelsvar-1"},"Eksempelsvar"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "xQnT7GYT6Ag--3oY_EcOOdXe-I0",\n  "token_type": "bearer",\n  "refresh_token": "H3SW6YFJ-tOPe0FQCM1Jd6VnMiA",\n  "expires_in": 2627999\n}\n')),(0,r.yg)("h3",{id:"oph\xe6velse-af-et-refresh-token"},"Oph\xe6velse af et Refresh-token"),(0,r.yg)("p",null,"For at oph\xe6ve et opdateringstoken skal flg. POST-anmodning foretages med de givne parametre:"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"https://api.adguard-dns.io/oapi/v1/revoke_token")),(0,r.yg)("h4",{id:"anmodningseksempel"},"Anmodningseksempel"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"$ curl 'https://api.adguard-dns.com/oapi/v1/revoke_token' -i -X POST \\\n    -d 'token=H3SW6YFJ-tOPe0FQCM1Jd6VnMiA'\n")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"refresh_token")),(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("inlineCode",{parentName:"td"},"REFRESH TOKEN"),", der skal oph\xe6ves")))),(0,r.yg)("h3",{id:"authorization-endpoint"},"Authorization endpoint"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"To access this endpoint, you need to contact us at ",(0,r.yg)("strong",{parentName:"p"},(0,r.yg)("a",{parentName:"strong",href:"mailto:devteam@adguard.com"},"devteam@adguard.com")),". Please describe the reason and use cases for this endpoint, as well as provide the redirect URI. Upon approval, you will receive a unique client identifier, which should be used for the ",(0,r.yg)("strong",{parentName:"p"},"client_id")," parameter.")),(0,r.yg)("p",null,"The ",(0,r.yg)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endpoint is used to interact with the resource owner and get the authorization to access the protected resource."),(0,r.yg)("p",null,"The service redirects you to AdGuard to authenticate (if you are not already logged in) and then back to your application."),(0,r.yg)("p",null,"The request parameters of the ",(0,r.yg)("strong",{parentName:"p"},"/oapi/v1/oauth_authorize")," endpoint are:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"left"},"Parameter"),(0,r.yg)("th",{parentName:"tr",align:"left"},"Beskrivelse"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"response_type")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Tells the authorization server which grant to execute")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"client_id")),(0,r.yg)("td",{parentName:"tr",align:"left"},"The ID of the OAuth client that asks for authorization")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"redirect_uri")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Contains a URL. A successful response from this endpoint results in a redirect to this URL")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"state")),(0,r.yg)("td",{parentName:"tr",align:"left"},"An opaque value used for security purposes. If this request parameter is set in the request, it is returned to the application as part of the ",(0,r.yg)("strong",{parentName:"td"},"redirect_uri"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"left"},(0,r.yg)("strong",{parentName:"td"},"aid")),(0,r.yg)("td",{parentName:"tr",align:"left"},"Affiliate identifier")))),(0,r.yg)("p",null,"F.eks.:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"https://api.adguard-dns.io/oapi/v1/oauth_authorize?response_type=token&client_id=CLIENT_ID&redirect_uri=REDIRECT_URI&state=1jbmuc0m9WTr1T6dOO82\n")),(0,r.yg)("p",null,"To inform the authorization server which grant type to use, the ",(0,r.yg)("strong",{parentName:"p"},"response_type")," request parameter is used as follows:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"For the Implicit grant, use ",(0,r.yg)("strong",{parentName:"li"},"response_type=token")," to include an access token.")),(0,r.yg)("p",null,"A successful response is ",(0,r.yg)("strong",{parentName:"p"},"302 Found"),", which triggers a redirect to ",(0,r.yg)("strong",{parentName:"p"},"redirect_uri")," (which is a request parameter). The response parameters are embedded in the fragment component (the part after ",(0,r.yg)("inlineCode",{parentName:"p"},"#"),") of the ",(0,r.yg)("strong",{parentName:"p"},"redirect_uri")," parameter in the ",(0,r.yg)("strong",{parentName:"p"},"Location")," header."),(0,r.yg)("p",null,"F.eks.:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-http",metastring:"request",request:!0},"HTTP/1.1 302 Found\nLocation: REDIRECT_URI#access_token=...&token_type=Bearer&expires_in=3600&state=1jbmuc0m9WTr1T6dOO82\n")),(0,r.yg)("h3",{id:"adgang-til-api"},"Adgang til API"),(0,r.yg)("p",null,"N\xe5r f\xf8rst adgangs- og refresh-tokenerne er genereret, kan API-kald foretages ved at videregive adgangstokenet i headeren."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Header-navnet skal v\xe6re ",(0,r.yg)("inlineCode",{parentName:"li"},"Authorization")),(0,r.yg)("li",{parentName:"ul"},"Header-v\xe6rdien skal v\xe6re ",(0,r.yg)("inlineCode",{parentName:"li"},"Bearer {access_token}"))),(0,r.yg)("h2",{id:"api"},"API"),(0,r.yg)("h3",{id:"reference"},"Reference"),(0,r.yg)("p",null,"Se metodereferencen ",(0,r.yg)("a",{parentName:"p",href:"/KnowledgeBaseDNS/da/private-dns/api/reference"},"h\xe9r"),"."),(0,r.yg)("h3",{id:"openapi-specifikation"},"OpenAPI-specifikation"),(0,r.yg)("p",null,"OpenAPI-specifikationen er tilg\xe6ngelig via ",(0,r.yg)("a",{parentName:"p",href:"https://api.adguard-dns.io/static/swagger/openapi.json"},"https://api.adguard-dns.io/static/swagger/openapi.json"),"."),(0,r.yg)("p",null,"Forskellige v\xe6rkt\xf8jer kan bruges til at se listen over tilg\xe6ngelige API-metoder. Filen kan f.eks. \xe5bnes i ",(0,r.yg)("a",{parentName:"p",href:"https://editor.swagger.io/"},"https://editor.swagger.io/"),"."),(0,r.yg)("h3",{id:"\xe6ndringslog"},"\xc6ndringslog"),(0,r.yg)("p",null,"Den komplette AdGuard DNS API-\xe6ndringslog er tilg\xe6ngelig p\xe5 ",(0,r.yg)("a",{parentName:"p",href:"/KnowledgeBaseDNS/da/private-dns/api/changelog"},"denne side"),"."),(0,r.yg)("h2",{id:"feedback"},"Feedback"),(0,r.yg)("p",null,"\xd8nskes denne API udvidet med nye metoder, s\xe5 send os en e-mail via ",(0,r.yg)("inlineCode",{parentName:"p"},"devteam@adguard.com")," med information om, hvad der \xf8nskes tilf\xf8jet."))}m.isMDXComponent=!0}}]);